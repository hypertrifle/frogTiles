@hypertrifle you definitely wont get far since Luxe ignores when you ask for a stencil buffer to be included in the config object!
once you remedy that issue its super easy to get stencil up and running

### hypertrifle 20:08
Could you elaborate?

### prime31 20:11
when config is called on your game you are supposed to be able to ask for depth and stencil buffers via the config object
in reality, Luxe ignores when you ask for stencil as you can see here
it should be checking RenderConfig.depth and RenderConfig.stencil and creating the buffers you ask for

### hypertrifle 20:13
I see
I think the way I was experimenting was accessing the the depth buffer via glsl shaders
(which quite possibly is the incorrect way to go about it!)

### prime31 20:19
that will work as long as you manually enable/disable it before the Batcher renders. just do something like this (I wrapped these up in helper methods on my renderer):
`// enable
Luxe.renderer.state.enable( GL.DEPTH_TEST );
Luxe.renderer.state.depth_function( yourDepthFunction );

// render batcher or other stuff

// disable
Luxe.renderer.state.disable( GL.DEPTH_TEST );


// visualize depth info in shader
gl_FragColor = vec4( vec3( gl_FragCoord.z ), 1.0 );`
note that the luxe camera sets near/far to crazy high numbers (-1000 to 1000 if I recall) so until you lower those the depth buffer is pretty useless

### hypertrifle 20:21
I see, is your gif up above based on the SightLight code?

### prime31 20:24
no. i dont have triangle fans in my renderer so that particular algorithm wouldnt work unfortunately. It's based on some other algorithm I came across that is similar but a bit different. it fetches all the verts just like SightLight but doesnt do the ray before/after each vert check. this article (http://www.redblobgames.com/articles/visibility/) has the details
it makes nice, simple triangles that my renderer can render super fast

### hypertrifle 20:25
Amazing, thanks @prime31 I'll have a read and a little experiment
prime31 20:26
if you already know the SightLight algorithm stick this one in your toolbox as well and youll pretty much be able to do visibility calculations for anything you could ever want

### hypertrifle 20:29
